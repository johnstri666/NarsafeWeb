<!DOCTYPE html>
<html lang="id">
  <head>
    <link rel="icon" href="/Image/logo.png" type="image/x-icon" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checklist Harian - Langkah Sadar Diri</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <style>
      :root {
        --primary-color: #053758;
        --accent-color: #18a6de;
        --accent-light: #5dade2;
        --secondary-color: #2c3e50;
        --card-bg: #111111;
        --card-hover: #1a1a1a;
        --border-radius: 16px;
        --border-radius-sm: 8px;
        --box-shadow: 0 12px 24px rgba(0, 0, 0, 0.25);
        --box-shadow-hover: 0 16px 32px rgba(0, 0, 0, 0.3);
        --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --success-color: #2ecc71;
        --warning-color: #f39c12;
        --danger-color: #e74c3c;
        --glass-effect: rgba(255, 255, 255, 0.05);
      }

      body {
        background: linear-gradient(135deg, #000000 0%, #001320 100%);
        font-family: "Inter", sans-serif;
        line-height: 1.7;
        padding-bottom: 60px;
        padding-top: 80px;
        min-height: 100vh;
        color: var(--text-primary);
        overflow-x: hidden;
      }

      .navbar {
        background-color: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(12px);
        line-height: 2.5rem;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        padding: 10px 0;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        transition: var(--transition);
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }

      .navbar.scrolled {
        background-color: rgba(0, 0, 0, 0.97);
        padding: 8px 0;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      }

      .navbar-brand img {
        transition: var(--transition);
        filter: brightness(1.1);
      }

      .nav-link {
        color: #3cb1ff;
        font-weight: 300;
        padding: 0.7rem 1.2rem !important;
        margin: 0 3px;
        border-radius: 1px;
        transition: var(--transition);
        position: relative;
        font-size: 0.95rem;
      }

      .nav-link:hover {
        color: var(--accent-color) !important;
        background-color: #001320;
      }

      .nav-link.active {
        background-color: #18a6de !important;
        color: white !important;
        font-size: 1.2rem;
        font-weight: 300;
        box-shadow: 0 2px 8px rgba(3, 101, 140, 0.3);
      }

      .navbar-toggler {
        border: none;
        padding: 0.5rem;
        color: white;
        background-color: transparent;
      }
      .navbar-toggler-icon {
        display: inline-block;
        width: 1.2em;
        height: 1.2em;
        vertical-align: middle;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='white' stroke-linecap='shape' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100%;
      }

      .navbar-toggler:focus {
        box-shadow: none !important; /* Hilangkan box shadow saat focus */
        outline: none;
      }

      .container {
        max-width: 95%;
        padding: 0 20px;
      }

      .header-bg {
        background-image: linear-gradient(
            rgba(0, 0, 0, 0.7),
            rgba(0, 0, 0, 0.7)
          ),
          url(/Image/man2.jpg);
        background-size: cover;
        background-position: center;
        padding: 6rem 2rem;
        margin-bottom: 3rem;
        text-align: center;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
      }

      .header-bg::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(5, 55, 88, 0.3) 0%,
          rgba(0, 0, 0, 0.7) 100%
        );
        z-index: 1;
      }

      .header-bg:hover {
        transform: translateY(-5px);
        box-shadow: var(--box-shadow-hover);
      }

      .app-header {
        padding: 15px 10px;
        position: relative;
        z-index: 2;
      }

      .app-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        background: #18a6de;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        font-family: "Inter", sans-serif;
        letter-spacing: 0.5px;
      }

      .app-subtitle {
        color: white;
        font-size: 1.15rem;
        margin: 0 auto 2rem;
        line-height: 1.7;
        max-width: 700px;
      }

      .info-link {
        color: var(--accent-color);
        text-decoration: none;
        font-weight: 300;
        border-bottom: 1px dashed var(--accent-color);
        transition: var(--transition);
        font-size: 1rem;
        display: inline-flex;
        align-items: center;
        padding: 0.5rem 0;
        position: relative;
      }

      .info-link i {
        margin-right: 8px;
        transition: var(--transition);
      }

      .info-link:hover {
        color: var(--accent-light);
        border-bottom: 1px solid var(--accent-light);
      }

      .info-link:hover i {
        transform: translateX(3px);
      }

      .stats-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin-bottom: 3rem;
        gap: 20px;
      }

      .stat-card {
        flex: 1 1 100%;
        min-width: 0;
        padding: 1.5rem;
        background: rgba(12, 11, 11, 0.881);
        backdrop-filter: blur(10px);
        box-shadow: var(--box-shadow);
        transition: var(--transition);
        text-align: center;
        border-radius: var(--border-radius);
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(90deg, var(--accent-color), transparent);
      }

      .stat-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--box-shadow-hover);
        background: #001623d9;
      }

      .stat-label {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: var(--text-secondary);
        margin-bottom: 0.8rem;
        font-weight: 500;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .stat-value i {
        margin-right: 10px;
        font-size: 1.2rem;
        color: var(--accent-color);
      }

      .checklist-card {
        background: rgba(17, 17, 17, 0.8);
        backdrop-filter: blur(10px);
        box-shadow: var(--box-shadow);
        border: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 40px;
        border-radius: var(--border-radius);
        transition: var(--transition);
      }

      .checklist-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--box-shadow-hover);
      }

      .card-header {
        background: linear-gradient(
          135deg,
          rgba(7, 22, 37, 0.8) 0%,
          rgba(2, 40, 64, 0.8) 100%
        );
        color: #fff;
        font-size: 1.2rem;
        padding: 1.5rem;
        border: none;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        border-top-left-radius: var(--border-radius);
        border-top-right-radius: var(--border-radius);
      }

      .card-header i {
        margin-right: 12px;
        color: var(--accent-color);
        font-size: 1.1rem;
      }

      .card-body {
        padding: 2rem;
        background-color: transparent;
      }

      .table {
        border-collapse: separate;
        border-spacing: 0;
        width: 100%;
      }

      .table th {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--accent-color);
        font-weight: 600;
        background-color: transparent;
        padding: 1rem;
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        position: sticky;
        top: 0;
        backdrop-filter: blur(10px);
      }

      .table td {
        background: transparent;
        padding: 1.2rem 1rem;
        border: none;
        color: var(--text-primary);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        vertical-align: middle;
        font-size: 0.95rem;
        transition: var(--transition);
      }

      .table tr:hover td {
        background: rgba(0, 21, 34, 0.833);
      }

      .table tr:last-child td {
        border-bottom: none;
      }

      .custom-checkbox {
        appearance: none;
        -webkit-appearance: none;
        width: 24px;
        height: 24px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin: 0;
        position: relative;
        transition: all 0.3s ease;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 6px;
        background: transparent;
      }

      .custom-checkbox.sudah {
        border-color: rgba(52, 152, 219, 0.5);
      }

      .custom-checkbox.belum {
        border-color: rgba(231, 76, 60, 0.5);
      }

      .custom-checkbox.sudah:checked {
        background-color: var(--accent-color);
        border-color: var(--accent-color);
        animation: pulse-success 0.6s;
      }

      .custom-checkbox.belum:checked {
        background-color: var(--danger-color);
        border-color: var(--danger-color);
        animation: pulse-failure 0.6s;
      }

      .custom-checkbox:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
      }

      .custom-checkbox.sudah:checked::before {
        content: "✓";
        color: white;
        font-size: 14px;
        font-weight: bold;
      }

      .custom-checkbox.belum:checked::before {
        content: "✗";
        color: white;
        font-size: 12px;
        font-weight: bold;
      }

      @keyframes pulse-success {
        0% {
          transform: scale(0.9);
          box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
        }
        70% {
          transform: scale(1.1);
          box-shadow: 0 0 0 12px rgba(52, 152, 219, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
        }
      }

      @keyframes pulse-failure {
        0% {
          transform: scale(0.9);
          box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7);
        }
        70% {
          transform: scale(1.1);
          box-shadow: 0 0 0 12px rgba(231, 76, 60, 0);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 0 rgba(231, 76, 60, 0);
        }
      }

      .checkbox-label {
        margin: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
      }

      .checklist-text {
        font-size: 1rem;
        line-height: 1.6;
        transition: var(--transition);
        padding: 0.5rem 0;
      }

      .checklist-text:hover {
        color: var(--accent-color);
        transform: translateX(5px);
      }

      .btn-action {
        padding: 0.8rem 1.8rem;
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: var(--transition);
        margin-right: 15px;
        margin-top: 1.5rem;
        margin-bottom: 0.5rem;
        font-size: 1rem;
        border-radius: var(--border-radius-sm);
        border: 2px solid transparent;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
      }

      .btn-action::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: 0.5s;
      }

      .btn-action:hover::before {
        left: 100%;
      }

      .btn-action i {
        margin-right: 10px;
        transition: var(--transition);
      }

      .btn-reset {
        background-color: var(--danger-color);
        color: white;
      }

      .btn-reset:hover {
        background-color: transparent;
        color: var(--danger-color);
        border-color: var(--danger-color);
      }

      .btn-reset:hover i {
        transform: rotate(-180deg);
      }

      .btn-download {
        background-color: var(--accent-color);
        color: white;
      }

      .btn-download:hover {
        background-color: transparent;
        color: var(--accent-color);
        border-color: var(--accent-color);
      }

      .btn-download:hover i {
        transform: translateY(-3px);
      }

      .progress-container {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-top: 10px;
        width: 100%;
      }

      .progress {
        height: 12px; /* Sedikit lebih tinggi */
        width: 100%;
        background-color: rgba(185, 28, 28, 0.1); /* Warna lebih subtle */
        border-radius: 12px; /* Border radius lebih besar */
        overflow: hidden;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .progress-bar {
        height: 100%;
        border-radius: 12px;
        background: linear-gradient(
          90deg,
          var(--accent-color),
          var(--accent-light),
          var(--accent-color)
        ); /* Gradient lebih menarik */
        background-size: 200% 100%;
        position: relative;
        overflow: hidden;
        transition: width 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
      }

      .progress-bar.animated {
        animation: gradientMove 3s linear infinite;
      }

      @keyframes gradientMove {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 200% 50%;
        }
      }

      .progress-bar::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 50%;
        height: 100%;
        background: linear-gradient(
          to right,
          transparent 0%,
          rgba(255, 255, 255, 0.3) 50%,
          transparent 100%
        );
        animation: shine 3s ease-in-out infinite;
      }

      @keyframes shine {
        0% {
          left: -100%;
        }
        20% {
          left: 100%;
        }
        100% {
          left: 100%;
        }
      }

      .progress-label {
        color: var(--text-primary);
        font-size: 1rem;
        font-weight: 500;
        white-space: nowrap;
        min-width: 100px;
        text-align: right;
      }

      #overlay-info {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 1050;
        display: none;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(8px);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      #overlay-info.show {
        display: flex;
        opacity: 1;
      }

      #overlay-info .modal-card {
        position: relative;
        background-color: var(--card-bg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 0;
        width: 95%;
        max-width: 700px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        color: var(--text-primary);
        transform: translateY(20px);
        transition: transform 0.3s ease;
      }

      #overlay-info.show .modal-card {
        transform: translateY(0);
      }

      .modal-header {
        color: white;
        background: linear-gradient(
          135deg,
          var(--accent-color) 0%,
          #106aa7 100%
        );
        padding: 1.5rem;
        font-size: 1.5rem;
        margin-bottom: 0;
        border-top-left-radius: var(--border-radius);
        border-top-right-radius: var(--border-radius);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        font-family: "Playfair Display", serif;
      }

      .modal-header i {
        margin-right: 12px;
      }

      .modal-body {
        padding: 2rem;
      }

      .modal-section {
        margin-bottom: 2rem;
      }

      .modal-section:last-child {
        margin-bottom: 0;
      }

      .modal-section h5 {
        color: var(--accent-color);
        font-size: 1.2rem;
        margin-bottom: 1rem;
        padding-left: 12px;
        border-left: 4px solid var(--accent-color);
        font-weight: 600;
      }

      .modal-section p {
        font-size: 1rem;
        line-height: 1.8;
        color: var(--text-secondary);
      }

      .alert-insight {
        background-color: rgba(26, 25, 25, 0.5);
        border-left: 4px solid var(--accent-color);
        padding: 1.2rem;
        border-radius: var(--border-radius-sm);
        font-size: 1rem;
        line-height: 1.7;
        margin: 2rem 0;
        backdrop-filter: blur(5px);
      }

      .alert-insight strong {
        color: var(--accent-color);
        font-weight: 600;
      }

      .alert-insight i {
        margin-right: 10px;
        color: var(--accent-color);
        font-size: 1.2rem;
      }

      .btn-primary {
        background-color: var(--accent-color);
        border-radius: var(--border-radius-sm);
        border: 2px solid var(--accent-color);
        padding: 1rem 2.5rem;
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: var(--transition);
        font-size: 1rem;
        color: white;
        position: relative;
        overflow: hidden;
      }

      .btn-primary:hover {
        background-color: transparent;
        color: var(--accent-color);
        transform: translateY(-2px);
      }

      .btn-primary::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: rgba(255, 255, 255, 0.5);
        opacity: 0;
        border-radius: 100%;
        transform: scale(1, 1) translate(-50%);
        transform-origin: 50% 50%;
      }

      .btn-primary:focus:not(:active)::after {
        animation: ripple 0.6s ease-out;
      }

      @keyframes ripple {
        0% {
          transform: scale(0, 0);
          opacity: 0.5;
        }
        100% {
          transform: scale(20, 20);
          opacity: 0;
        }
      }

      /* Floating particles animation */
      .particles {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        background: rgba(52, 152, 219, 0.5);
        border-radius: 50%;
        pointer-events: none;
      }

      /* Celebration animation */
      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        background-color: var(--accent-color);
        opacity: 0;
        z-index: 9999;
        animation: confetti-fall 5s linear forwards;
      }

      @keyframes confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      /* Floating action button */
      .fab {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 60px;
        height: 60px;
        background-color: var(--accent-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        box-shadow: 0 4px 20px rgba(52, 152, 219, 0.4);
        cursor: pointer;
        z-index: 100;
        transition: var(--transition);
      }

      .fab:hover {
        transform: translateY(-5px) scale(1.1);
        box-shadow: 0 8px 25px rgba(52, 152, 219, 0.5);
      }

      /* Tooltip */
      .tooltip-inner {
        background-color: var(--accent-color);
        padding: 8px 12px;
        font-size: 0.9rem;
      }

      .bs-tooltip-auto[data-popper-placement^="top"] .tooltip-arrow::before,
      .bs-tooltip-top .tooltip-arrow::before {
        border-top-color: var(--accent-color);
      }

      /* Congratulation Modal */
      .congratulation-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s ease;
      }

      .congratulation-modal.show {
        opacity: 1;
        visibility: visible;
      }

      .congratulation-content {
        background: linear-gradient(135deg, #053758 0%, #001320 100%);
        border-radius: var(--border-radius);
        padding: 3rem;
        text-align: center;
        max-width: 600px;
        width: 90%;
        position: relative;
        overflow: hidden;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(52, 152, 219, 0.3);
        transform: scale(0.8);
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .congratulation-modal.show .congratulation-content {
        transform: scale(1);
      }

      .congratulation-content::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(52, 152, 219, 0.1) 0%,
          transparent 70%
        );
        animation: rotate 20s linear infinite;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .congratulation-icon {
        font-size: 5rem;
        color: var(--accent-color);
        margin-bottom: 1.5rem;
        display: inline-block;
        animation: bounce 1s ease infinite alternate;
      }

      @keyframes bounce {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(-15px);
        }
      }

      .congratulation-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        background: linear-gradient(90deg, #3498db, #03afff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-family: "Playfair Display", serif;
      }

      .congratulation-message {
        font-size: 1.2rem;
        line-height: 1.6;
        margin-bottom: 2rem;
        color: var(--text-secondary);
      }

      .congratulation-button {
        background-color: var(--accent-color);
        color: white;
        border: none;
        padding: 1rem 2.5rem;
        font-size: 1.1rem;
        border-radius: var(--border-radius-sm);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .congratulation-button:hover {
        background-color: transparent;
        color: var(--accent-color);
        box-shadow: 0 0 0 2px var(--accent-color);
      }

      .confetti-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
      }
      .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        opacity: 0;
        animation: modal-confetti-fall 5s linear forwards;
      }

      @keyframes modal-confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      @keyframes modal-confetti-fall {
        0% {
          transform: translateY(-100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      /* Responsive adjustments */
      @media (min-width: 576px) {
        .stat-card {
          flex: 1 1 calc(50% - 20px);
        }

        .btn-action {
          width: auto;
        }
      }

      @media (min-width: 768px) {
        .container {
          max-width: 90%;
        }

        .header-bg {
          padding: 8rem 4rem;
        }

        .app-title {
          font-size: 3rem;
        }

        .app-subtitle {
          font-size: 1.25rem;
        }

        .stat-card {
          flex: 1 1 calc(33.333% - 20px);
          min-width: 220px;
          padding: 1.8rem;
        }

        .card-header {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
          font-size: 1.3rem;
          padding: 1.8rem;
        }

        .progress-container {
          margin-top: 0;
          width: auto;
        }

        .table th,
        .table td {
          padding: 1.2rem;
          font-size: 1rem;
        }

        .checklist-text {
          font-size: 1.05rem;
        }

        .custom-checkbox {
          width: 26px;
          height: 26px;
        }
      }

      @media (min-width: 992px) {
        .app-title {
          font-size: 3.5rem;
        }

        .header-bg {
          padding: 10rem 6rem;
        }

        .checklist-text {
          font-size: 1.1rem;
        }

        .card-header {
          padding: 2rem;
          font-size: 1.4rem;
        }

        .card-body {
          padding: 2.5rem;
        }

        .btn-action {
          padding: 1rem 2.2rem;
          font-size: 1.1rem;
        }
      }

      @media (min-width: 1200px) {
        .container {
          max-width: 1140px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Floating particles background -->
    <div class="particles" id="particles"></div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <a class="navbar-brand" href="/index.html">
          <img src="/Image/Narsafe logo 2.png" width="90%" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="/index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/selfreflection/index.html"
                >Self Check-In</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/SelfStep/index.html"
                >Self Step</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/weekly/index.html">Weekly Challenge</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/Letter/index.html"
                >Letter to Yourself</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container my-4" id="main-content">
      <div class="header-bg">
        <header class="app-header">
          <h1 class="app-title">Langkah Sadar Diri</h1>
          <p class="app-subtitle">
            Panduan refleksi harian untuk mengembangkan kesadaran diri dan
            kerendahan hati melalui praktek-praktek bermakna
          </p>
          <a href="#" class="info-link" onclick="tampilkanInfo(event)">
            <i class="fas fa-info-circle"></i> Lebih Lanjut
          </a>
        </header>
      </div>

      <div class="stats-container">
        <div
          class="stat-card"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          title="Jumlah hari berturut-turut Anda menggunakan aplikasi ini"
        >
          <div class="stat-label">konsisten</div>
          <div class="stat-value">
            <i class="fas fa-calendar-check"></i>
            <span id="streak-count">1</span> hari
          </div>
        </div>
        <div
          class="stat-card"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          title="Tanggal hari ini"
        >
          <div class="stat-label">Tanggal</div>
          <div class="stat-value" id="tanggal"></div>
        </div>
        <div
          class="stat-card"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          title="Kemajuan checklist hari ini"
        >
          <div class="stat-label">Kemajuan</div>
          <div class="stat-value" id="kemajuan">0/10</div>
        </div>
      </div>

      <div class="checklist-card">
        <div class="card-header">
          <div><i class="fas fa-tasks"></i>Langkah Sadar Diri</div>
          <div class="progress-container">
            <div class="progress">
              <div
                id="progress-bar"
                class="progress-bar"
                role="progressbar"
                style="width: 0%"
              ></div>
            </div>
            <div id="status" class="progress-label">0/10 Selesai</div>
          </div>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table align-middle">
              <thead>
                <tr>
                  <th style="width: 5%" class="text-center">Nomor</th>
                  <th class="text-start">Praktik Reflektif</th>
                  <th style="width: 12%" class="text-center">Sudah</th>
                  <th style="width: 12%" class="text-center">Belum</th>
                </tr>
              </thead>
              <tbody id="checklist-body"></tbody>
            </table>
          </div>
          <div class="d-flex flex-wrap">
            <button class="btn btn-action btn-reset">
              <i class="fas fa-redo-alt"></i>Reset
            </button>
            <button class="btn btn-action btn-download">
              <i></i>Ekspor ke PDF
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Floating Action Button -->
    <div
      class="fab"
      id="fab"
      data-bs-toggle="tooltip"
      data-bs-placement="left"
      title="Kembali ke Atas"
    >
      <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Info Modal -->
    <div id="overlay-info">
      <div class="modal-card">
        <h4 class="modal-header">
          <i class="fas fa-info-circle"></i>"Langkah Sadar Diri"
        </h4>

        <div class="modal-body">
          <div class="modal-section">
            <p>
              <strong>"Langkah Sadar Diri"</strong> merupakan panduan refleksi
              harian yang dikembangkan berdasarkan prinsip-prinsip psikologi
              positif dan praktik mindfulness untuk membantu meningkatkan
              kesadaran diri (self-awareness) dan mengembangkan kerendahan hati
              sebagai kebajikan intelektual.
            </p>
          </div>

          <div class="modal-section">
            <h5>Landasan Akademis</h5>
            <p>
              Checklist ini dirancang mengikuti penelitian kontemporer dalam
              bidang pengembangan karakter dan psikologi positif yang
              menunjukkan bahwa kesadaran diri dan kerendahan hati dapat dilatih
              melalui praktik reflektif harian yang konsisten dan terarah.
            </p>
          </div>

          <div class="modal-section">
            <h5>Waktu Optimal untuk Refleksi</h5>
            <p>
              Berdasarkan studi tentang ritme sirkadian dan waktu optimal untuk
              refleksi, checklist ini sebaiknya diisi di malam hari sebelum
              tidur saat pikiran telah tenang dan dapat melakukan evaluasi
              harian dengan lebih objektif dan mendalam.
            </p>
          </div>

          <div class="modal-section">
            <h5>Panduan</h5>
            <p>
              Bacalah setiap poin dengan tenang dan reflektif, lalu evaluasi
              dengan jujur apakah Anda telah mempraktikkannya hari ini. Tandai
              sesuai dengan kondisi aktual, bukan yang Anda harapkan. Ingat
              bahwa proses ini adalah untuk pengembangan diri, bukan penilaian.
            </p>
          </div>

          <div class="alert alert-insight">
            <strong><i class="fas fa-lightbulb"></i>Wawasan:</strong>
            Penelitian menunjukkan bahwa kesadaran diri dibangun melalui praktik
            mikrohabitual—tindakan kecil yang dilakukan secara konsisten—yang
            secara bertahap mengubah pola pikir dan perilaku kita menjadi lebih
            reflektif dan sadar.
          </div>

          <div class="text-center mt-4">
            <button class="btn btn-primary" id="btn-mengerti">Mengerti</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Congratulation Modal -->
    <div class="congratulation-modal" id="congratulation-modal">
      <div class="confetti-container" id="confetti-container"></div>
      <div class="congratulation-content">
        <div class="congratulation-icon">
          <i class="fas fa-trophy"></i>
        </div>
        <h2 class="congratulation-title">Selamat!</h2>
        <p class="congratulation-message">
          Anda telah menyelesaikan semua langkah hari ini. Pertahankan
          konsistensi Anda untuk pengembangan diri yang lebih baik!
        </p>
        <button class="congratulation-button" id="congratulation-close">
          Lanjutkan Perjalanan
        </button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Fungsi untuk melakukan logging yang konsisten
        const logInfo = (message) => {
          console.info(`[Checklist App] ${message}`);
        };

        const logWarning = (message) => {
          console.warn(`[Checklist App] ${message}`);
        };

        const logError = (message, error) => {
          console.error(`[Checklist App] ${message}`, error);
        };

        // Konfigurasi aplikasi
        const CONFIG = {
          STORAGE_KEYS: {
            LAST_VISIT: "last-visit-date",
            LAST_VISIT_TIMESTAMP: "last-visit-timestamp", // Tambahan untuk menyimpan timestamp
            YESTERDAY_COMPLETED: "yesterday-completed",
            STREAK: "streak",
            CHECK_PREFIX: "check-",
          },
          RESET_INTERVAL_MS: 24 * 60 * 60 * 1000, // 24 jam dalam milidetik
          CHECKLIST_ITEMS_COUNT: 10,
        };

        // Pastikan jsPDF tersedia dalam scope global
        let jsPDF;
        try {
          jsPDF = window.jspdf && window.jspdf.jsPDF;
          if (!jsPDF) {
            logWarning(
              "jsPDF library not found. PDF export functionality will be disabled."
            );
          }
        } catch (e) {
          logWarning("Error initializing jsPDF:", e);
        }

        // Fungsi untuk cek apakah elemen ada di DOM
        const getElement = (selector) => {
          const element =
            document.getElementById(selector) ||
            document.querySelector(selector);
          if (!element) {
            logWarning(`Element with selector "${selector}" not found in DOM`);
          }
          return element;
        };

        // DOM Elements - menggunakan fungsi getElement untuk konsistensi
        const elements = {
          checklistBody: getElement("checklist-body"),
          kemajuan: getElement("kemajuan"),
          status: getElement("status"),
          streakCount: getElement("streak-count"),
          fab: getElement("fab"),
          congratulationClose: getElement("congratulation-close"),
          overlay: getElement("overlay-info"),
          btnMengerti: getElement("btn-mengerti"),
          btnReset: getElement(".btn-reset"),
          btnDownload: getElement(".btn-download"),
          tanggalEl: getElement("tanggal"),
          progressBar: getElement("progress-bar"),
          navbar: getElement(".navbar"),
          congratModal: getElement("congratulation-modal"),
          infoLink: getElement(".info-link"),
        };

        // Checklist items
        const checklistItems = [
          "Mendengarkan dengan penuh perhatian tanpa memotong saat orang lain berbicara",
          "Menahan diri dari membandingkan pencapaian atau kehidupan pribadi di media sosial",
          "Memberikan apresiasi atau pujian tulus kepada orang lain",
          "Bersikap jujur dengan perasaan yang saya rasakan hari ini",
          "Menahan diri dari membicarakan orang lain secara negatif atau berprasangka",
          "Menekan keinginan untuk pamer atau mencari validasi berlebihan dari orang lain",
          "Mengungkapkan rasa terima kasih atas hal-hal kecil yang saya alami hari ini",
          "Mengalokasikan waktu khusus untuk refleksi diri dan evaluasi personal",
          "Memperlakukan semua orang dengan rasa hormat tanpa hierarki mental",
          "Melakukan tindakan kebaikan tanpa mengharapkan pengakuan atau imbalan apapun",
        ];

        // Fungsi untuk menyimpan data ke local storage dengan error handling
        const saveToStorage = (key, value) => {
          try {
            localStorage.setItem(key, value);
            return true;
          } catch (e) {
            logError(`Failed to save data to localStorage: ${key}`, e);
            return false;
          }
        };

        // Fungsi untuk mengambil data dari local storage dengan error handling
        const getFromStorage = (key, defaultValue = null) => {
          try {
            const value = localStorage.getItem(key);
            return value !== null ? value : defaultValue;
          } catch (e) {
            logError(`Failed to retrieve data from localStorage: ${key}`, e);
            return defaultValue;
          }
        };

        // Fungsi untuk membuat waktu hari ini dengan jam 00:00:00 (mulai hari)
        const getDayStart = () => {
          const today = new Date();
          today.setHours(0, 0, 0, 0);
          return today;
        };

        // Fungsi untuk memeriksa apakah perlu reset otomatis
        const checkAutoReset = () => {
          const now = new Date();
          const lastVisitTimestamp = parseInt(
            getFromStorage(CONFIG.STORAGE_KEYS.LAST_VISIT_TIMESTAMP, "0")
          );
          const lastVisitDate = getFromStorage(CONFIG.STORAGE_KEYS.LAST_VISIT);
          const today = now.toISOString().split("T")[0];

          // Log untuk debugging
          logInfo(`Current time: ${now.toISOString()}`);
          logInfo(`Last visit: ${new Date(lastVisitTimestamp).toISOString()}`);

          // Jika belum pernah disimpan, set timestamp saat ini
          if (lastVisitTimestamp === 0) {
            saveToStorage(
              CONFIG.STORAGE_KEYS.LAST_VISIT_TIMESTAMP,
              now.getTime().toString()
            );
            saveToStorage(CONFIG.STORAGE_KEYS.LAST_VISIT, today);
            return false;
          }

          // Periksa apakah sudah berlalu 24 jam sejak kunjungan terakhir
          const timeSinceLastVisit = now.getTime() - lastVisitTimestamp;

          // Jika sudah lewat 24 jam, reset checklist
          if (
            timeSinceLastVisit >= CONFIG.RESET_INTERVAL_MS ||
            lastVisitDate !== today
          ) {
            performDailyReset(now, lastVisitDate);
            return true;
          }

          return false;
        };

        // Fungsi untuk melakukan reset harian dan mengelola streak
        const performDailyReset = (now, lastVisitDate) => {
          const today = now.toISOString().split("T")[0];

          // Simpan tanggal kunjungan terakhir
          saveToStorage(CONFIG.STORAGE_KEYS.LAST_VISIT, today);
          saveToStorage(
            CONFIG.STORAGE_KEYS.LAST_VISIT_TIMESTAMP,
            now.getTime().toString()
          );

          // Periksa apakah user menyelesaikan checklist kemarin
          const yesterdayCompleted =
            getFromStorage(CONFIG.STORAGE_KEYS.YESTERDAY_COMPLETED) === "true";

          // Hitung streak
          let currentStreak = parseInt(
            getFromStorage(CONFIG.STORAGE_KEYS.STREAK, "1")
          );

          if (yesterdayCompleted) {
            // Tambah streak jika kemarin selesai
            currentStreak += 1;
            saveToStorage(CONFIG.STORAGE_KEYS.STREAK, currentStreak.toString());

            // Tampilkan streak celebration jika lebih dari 1 hari
            if (currentStreak > 1 && typeof createConfetti === "function") {
              createConfetti();
            }
          } else {
            // Reset streak jika kemarin tidak selesai
            saveToStorage(CONFIG.STORAGE_KEYS.STREAK, "1");
            currentStreak = 1;
          }

          // Update UI streak jika elemen ada
          if (elements.streakCount) {
            elements.streakCount.textContent = currentStreak.toString();
          }

          // Reset status kemarin
          saveToStorage(CONFIG.STORAGE_KEYS.YESTERDAY_COMPLETED, "false");

          // Hapus semua item checklist
          for (let i = 0; i < CONFIG.CHECKLIST_ITEMS_COUNT; i++) {
            localStorage.removeItem(`${CONFIG.STORAGE_KEYS.CHECK_PREFIX}${i}`);
          }

          logInfo(`Daily reset performed. New streak: ${currentStreak}`);

          // Muat ulang checklist
          loadChecklist();
        };

        // Fungsi untuk memeriksa reset harian dan timer
        const checkDailyReset = () => {
          // Periksa dan lakukan reset jika perlu
          checkAutoReset();

          // Set timer untuk mengecek reset otomatis setiap menit
          setInterval(() => {
            checkAutoReset();
          }, 60000); // Cek setiap menit

          // Load streak saat ini ke UI
          if (elements.streakCount) {
            const currentStreak = parseInt(
              getFromStorage(CONFIG.STORAGE_KEYS.STREAK, "1")
            );
            elements.streakCount.textContent = currentStreak.toString();
          }
        };

        // Create floating particles
        function createParticles() {
          const particlesContainer = getElement("particles");
          if (!particlesContainer) return;

          const particleCount = window.innerWidth < 768 ? 30 : 50;

          for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement("div");
            particle.classList.add("particle");

            // Random properties
            const size = Math.random() * 5 + 1;
            const posX = Math.random() * window.innerWidth;
            const posY = Math.random() * window.innerHeight;
            const opacity = Math.random() * 0.5 + 0.1;
            const delay = Math.random() * 5;

            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${posX}px`;
            particle.style.top = `${posY}px`;
            particle.style.opacity = opacity;
            particle.style.animation = `float ${
              Math.random() * 20 + 10
            }s linear ${delay}s infinite`;

            particlesContainer.appendChild(particle);
          }
        }

        function createModalConfetti() {
          const container = getElement("confetti-container");
          if (!container) return;

          container.innerHTML = "";

          for (let i = 0; i < 150; i++) {
            const confetti = document.createElement("div");
            confetti.classList.add("confetti");

            // Random properties
            const size = Math.random() * 12 + 3;
            const color = `hsl(${Math.random() * 60 + 180}, 80%, 60%)`;
            const left = Math.random() * 100;
            const animationDuration = Math.random() * 3 + 2;
            const delay = Math.random() * 5;

            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.backgroundColor = color;
            confetti.style.left = `${left}%`;
            confetti.style.animationDuration = `${animationDuration}s`;
            confetti.style.animationDelay = `${delay}s`;

            // Random shape
            if (Math.random() > 0.5) {
              confetti.style.borderRadius = "50%";
            } else {
              confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            }

            container.appendChild(confetti);
          }
        }

        // Create celebration confetti
        function createConfetti() {
          const colors = [
            "#3498db",
            "#2ecc71",
            "#e74c3c",
            "#f1c40f",
            "#9b59b6",
          ];

          for (let i = 0; i < 100; i++) {
            const confetti = document.createElement("div");
            confetti.classList.add("confetti");

            // Random properties
            const size = Math.random() * 10 + 5;
            const color = colors[Math.floor(Math.random() * colors.length)];
            const left = Math.random() * window.innerWidth;
            const animationDuration = Math.random() * 3 + 2;

            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.backgroundColor = color;
            confetti.style.left = `${left}px`;
            confetti.style.animationDuration = `${animationDuration}s`;

            document.body.appendChild(confetti);

            // Remove confetti after animation
            setTimeout(() => {
              confetti.remove();
            }, animationDuration * 1000);
          }
        }

        // Load checklist items
        function loadChecklist() {
          if (!elements.checklistBody || !elements.kemajuan || !elements.status)
            return;

          elements.checklistBody.innerHTML = "";
          let completed = 0;

          checklistItems.forEach((item, index) => {
            const saved = getFromStorage(
              `${CONFIG.STORAGE_KEYS.CHECK_PREFIX}${index}`
            );
            if (saved === "1") completed++;

            const row = document.createElement("tr");
            row.innerHTML = `
            <td class="text-center">${index + 1}</td>
            <td class="checklist-text">${item}</td>
            <td class="text-center">
              <label class="checkbox-label">
                <input class="custom-checkbox sudah" type="radio" name="check-${index}" value="1" ${
              saved === "1" ? "checked" : ""
            }>
              </label>
            </td>
            <td class="text-center">
              <label class="checkbox-label">
                <input class="custom-checkbox belum" type="radio" name="check-${index}" value="0" ${
              saved === "0" ? "checked" : ""
            }>
              </label>
            </td>
          `;
            elements.checklistBody.appendChild(row);
          });

          elements.kemajuan.textContent = `${completed}/10`;
          elements.status.textContent = `${completed}/10 Selesai`;

          // Update progress bar with animation
          if (elements.progressBar) {
            const progressPercentage =
              (completed / checklistItems.length) * 100;

            // Remove all classes first to avoid conflicts
            elements.progressBar.classList.remove(
              "progress-low",
              "progress-medium",
              "progress-high",
              "animated"
            );

            if (progressPercentage < 30) {
              elements.progressBar.classList.add("progress-low");
            } else if (progressPercentage < 70) {
              elements.progressBar.classList.add("progress-medium");
            } else {
              elements.progressBar.classList.add("progress-high");
              elements.progressBar.classList.add("animated"); // Hanya animasi penuh jika progress tinggi
            }

            // Only animate if anime.js is available
            if (typeof anime === "function") {
              anime({
                targets: elements.progressBar,
                width: `${progressPercentage}%`,
                duration: 1200,
                easing: "easeOutElastic",
                elasticity: 600,
                begin: function () {
                  // Add ripple effect when progress increases
                  if (
                    progressPercentage >
                    parseFloat(elements.progressBar.style.width || "0")
                  ) {
                    anime({
                      targets: elements.progressBar,
                      keyframes: [
                        { scaleX: 1, scaleY: 1 },
                        { scaleX: 1.05, scaleY: 1.2 },
                        { scaleX: 1, scaleY: 1 },
                      ],
                      duration: 800,
                      easing: "easeOutQuad",
                    });

                    // Add particles effect for significant progress
                    if (
                      progressPercentage -
                        parseFloat(elements.progressBar.style.width || "0") >
                      20
                    ) {
                      const particles = [];
                      for (let i = 0; i < 5; i++) {
                        const particle = document.createElement("div");
                        particle.style.position = "absolute";
                        particle.style.width = "4px";
                        particle.style.height = "4px";
                        particle.style.backgroundColor = "white";
                        particle.style.borderRadius = "50%";
                        particle.style.pointerEvents = "none";
                        particle.style.left = `${progressPercentage}%`;
                        particle.style.top = "-2px";
                        particle.style.opacity = "0.8";
                        elements.progressBar.parentElement.appendChild(
                          particle
                        );
                        particles.push(particle);
                      }

                      anime({
                        targets: particles,
                        translateY: [-10, 5],
                        translateX: anime.stagger([-20, 20]),
                        opacity: [0.8, 0],
                        duration: 800,
                        easing: "easeOutQuad",
                        complete: function () {
                          particles.forEach((p) => p.remove());
                        },
                      });
                    }
                  }
                },
              });
            } else {
              // Fallback if anime.js is not available
              elements.progressBar.style.width = `${progressPercentage}%`;
            }
          }

          // Check if all items are completed
          if (completed === 10) {
            // Mark today as completed for streak purposes
            saveToStorage(CONFIG.STORAGE_KEYS.YESTERDAY_COMPLETED, "true");

            // Show celebration
            createConfetti();

            // Show congratulation modal after a short delay
            setTimeout(() => {
              if (!elements.congratModal) return;

              elements.congratModal.classList.add("show");

              // Add additional confetti for the modal
              createModalConfetti();

              // Only animate if anime.js is available
              if (typeof anime === "function") {
                // Animate modal elements
                anime({
                  targets: ".congratulation-icon",
                  scale: [0.5, 1],
                  rotate: [20, 0],
                  duration: 800,
                  easing: "easeOutElastic",
                });

                anime({
                  targets: ".congratulation-title",
                  opacity: [0, 1],
                  translateY: [20, 0],
                  duration: 600,
                  delay: 200,
                  easing: "easeOutQuad",
                });

                anime({
                  targets: ".congratulation-message",
                  opacity: [0, 1],
                  translateY: [20, 0],
                  duration: 600,
                  delay: 400,
                  easing: "easeOutQuad",
                });

                anime({
                  targets: ".congratulation-button",
                  opacity: [0, 1],
                  translateY: [20, 0],
                  duration: 600,
                  delay: 600,
                  easing: "easeOutQuad",
                });
              }
            }, 1000);
          }
        }

        // Handle click events untuk close congratulation modal
        if (elements.congratulationClose) {
          elements.congratulationClose.addEventListener("click", () => {
            if (elements.congratModal) {
              elements.congratModal.classList.remove("show");
            }
          });
        }

        // Handle checklist changes
        if (elements.checklistBody) {
          elements.checklistBody.addEventListener("change", (e) => {
            if (e.target.name && e.target.name.startsWith("check-")) {
              saveToStorage(e.target.name, e.target.value);
              loadChecklist();
            }
          });
        }

        // Reset button
        if (elements.btnReset) {
          elements.btnReset.addEventListener("click", () => {
            if (
              confirm(
                "Apakah Anda yakin ingin mengatur ulang seluruh checklist hari ini?"
              )
            ) {
              for (let i = 0; i < CONFIG.CHECKLIST_ITEMS_COUNT; i++) {
                localStorage.removeItem(
                  `${CONFIG.STORAGE_KEYS.CHECK_PREFIX}${i}`
                );
              }
              loadChecklist();
            }
          });
        }

        // Export to PDF
        if (elements.btnDownload) {
          elements.btnDownload.addEventListener("click", () => {
            if (!jsPDF) {
              alert("Maaf, fungsi download PDF tidak tersedia saat ini.");
              return;
            }

            const doc = new jsPDF();

            const today = new Date().toLocaleDateString("id-ID", {
              day: "numeric",
              month: "long",
              year: "numeric",
            });

            // Set font and format
            doc.setFont("helvetica", "bold");
            doc.setFontSize(16);
            doc.setTextColor(52, 152, 219);
            doc.text(
              "CATATAN REFLEKSI LANGKAH SADAR DIRI",
              105,
              20,
              null,
              null,
              "center"
            );

            doc.setFont("helvetica", "normal");
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text(`Tanggal: ${today}`, 105, 30, null, null, "center");

            // Add a decorative line
            doc.setDrawColor(52, 152, 219);
            doc.setLineWidth(0.5);
            doc.line(20, 35, 190, 35);

            // Add checklist results
            let yPosition = 45;
            checklistItems.forEach((item, index) => {
              const value = getFromStorage(
                `${CONFIG.STORAGE_KEYS.CHECK_PREFIX}${index}`
              );
              const status =
                value === "1"
                  ? "✓ Sudah dilakukan"
                  : value === "0"
                  ? "✗ Belum dilakukan"
                  : "□ Belum diisi";

              if (yPosition > 270) {
                doc.addPage();
                yPosition = 20;
              }

              // Item number
              doc.setFont("helvetica", "bold");
              doc.setTextColor(0, 0, 0);
              doc.text(`${index + 1}.`, 20, yPosition);

              // Item text
              doc.setFont("helvetica", "normal");
              const splitText = doc.splitTextToSize(item, 160);
              doc.text(splitText, 30, yPosition);

              // Status
              doc.setFont("helvetica", "bold");
              doc.setTextColor(
                value === "1"
                  ? [52, 152, 219]
                  : value === "0"
                  ? [231, 76, 60]
                  : [100, 100, 100]
              );
              doc.text(status, 170, yPosition, null, null, "right");

              yPosition += splitText.length * 7 + 5;
            });

            // Add export timestamp
            const exportTime = new Date().toLocaleTimeString("id-ID");
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            doc.text(
              `Diekspor pada: ${today} pukul ${exportTime}`,
              105,
              doc.internal.pageSize.height - 10,
              null,
              null,
              "center"
            );

            // Save PDF
            doc.save(
              `refleksi-sadar-diri-${
                new Date().toISOString().split("T")[0]
              }.pdf`
            );
          });
        }

        // Set current date
        if (elements.tanggalEl) {
          elements.tanggalEl.textContent = new Date().toLocaleDateString(
            "id-ID",
            {
              day: "numeric",
              month: "long",
              year: "numeric",
            }
          );
        }

        // Info modal functions
        function tampilkanInfo(event) {
          if (!elements.overlay) return;
          event.preventDefault();
          elements.overlay.classList.add("show");
        }

        // Add event listener for info link
        if (elements.infoLink) {
          elements.infoLink.addEventListener("click", tampilkanInfo);
        }

        if (elements.btnMengerti && elements.overlay) {
          elements.btnMengerti.addEventListener("click", () => {
            elements.overlay.classList.remove("show");
          });

          elements.overlay.addEventListener("click", (e) => {
            if (e.target.id === "overlay-info") {
              elements.overlay.classList.remove("show");
            }
          });
        }

        // Floating action button - scroll to top
        if (elements.fab) {
          elements.fab.addEventListener("click", () => {
            window.scrollTo({
              top: 0,
              behavior: "smooth",
            });
          });

          // Show/hide FAB based on scroll position
          window.addEventListener("scroll", () => {
            if (window.scrollY > 300) {
              elements.fab.style.opacity = "1";
              elements.fab.style.visibility = "visible";
              elements.fab.style.transform = "translateY(0)";
            } else {
              elements.fab.style.opacity = "0";
              elements.fab.style.visibility = "hidden";
              elements.fab.style.transform = "translateY(20px)";
            }
          });
        }

        // Add scroll effect to navbar
        if (elements.navbar) {
          window.addEventListener("scroll", function () {
            if (window.scrollY > 50) {
              elements.navbar.classList.add("scrolled");
            } else {
              elements.navbar.classList.remove("scrolled");
            }
          });
        }

        // Initialize tooltips
        function initTooltips() {
          // Check if Bootstrap tooltip function exists
          if (
            typeof bootstrap !== "undefined" &&
            typeof bootstrap.Tooltip === "function"
          ) {
            const tooltipTriggerList = [].slice.call(
              document.querySelectorAll('[data-bs-toggle="tooltip"]')
            );
            if (tooltipTriggerList.length > 0) {
              tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
              });
            }
          }
        }

        // Initialize animations
        function initAnimations() {
          if (typeof anime !== "function") return;

          const animateElements = [
            { selector: ".app-title", delay: 0 },
            { selector: ".app-subtitle", delay: 200 },
            { selector: ".info-link", delay: 400 },
            { selector: ".stat-card", delay: "stagger", staggerDelay: 100 },
            { selector: ".checklist-card", delay: 600 },
          ];

          animateElements.forEach((item) => {
            const elements = document.querySelectorAll(item.selector);
            if (elements.length === 0) return;

            if (item.delay === "stagger") {
              anime({
                targets: item.selector,
                opacity: [0, 1],
                translateY: [30, 0],
                duration: 800,
                delay: anime.stagger(item.staggerDelay || 100),
                easing: "easeOutQuad",
              });
            } else {
              anime({
                targets: item.selector,
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 800,
                delay: item.delay,
                easing: "easeOutQuad",
              });
            }
          });
        }

        // Tambahkan fungsi debug countdown reset untuk menunjukkan waktu reset ke user
        function updateResetCountdown() {
          const resetCountdown = getElement("reset-countdown");
          if (!resetCountdown) return;

          const now = new Date();
          const lastVisitTimestamp = parseInt(
            getFromStorage(CONFIG.STORAGE_KEYS.LAST_VISIT_TIMESTAMP, "0")
          );
          const nextResetTime = new Date(
            lastVisitTimestamp + CONFIG.RESET_INTERVAL_MS
          );

          // Hitung sisa waktu
          const timeLeft = nextResetTime - now;

          if (timeLeft <= 0) {
            resetCountdown.textContent =
              "Reset akan terjadi saat halaman dimuat ulang";
            return;
          }

          // Konversi ke jam:menit:detik
          const hours = Math.floor(timeLeft / (1000 * 60 * 60));
          const minutes = Math.floor(
            (timeLeft % (1000 * 60 * 60)) / (1000 * 60)
          );
          const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

          resetCountdown.textContent = `Reset otomatis dalam: ${hours}j ${minutes}m ${seconds}d`;
        }

        // Set interval untuk memperbarui countdown
        function initResetCountdown() {
          updateResetCountdown();
          setInterval(updateResetCountdown, 1000);
        }

        // Initialize the app
        logInfo("Initializing checklist app");
        checkDailyReset();
        loadChecklist();
        createParticles();
        initTooltips();
        initAnimations();
        initResetCountdown();

        // Log app readiness
        logInfo("Checklist app successfully initialized");
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
